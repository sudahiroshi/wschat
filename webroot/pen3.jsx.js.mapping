{"version":3,"sources":["lib/built-in.jsx","pen3.jsx","nylon.client.jsx","lib/js/js/web.jsx","nylon.coe.jsx","lib/js/js.jsx"],"names":["Pen","canvas","x","y","ctx","getContext","mouse","start","color","nl","co","on","dummy","data","col","i","length","beginPath","fillStyle","arc","PI","fill","pen_down","pen_up","emit","draw","es","e","ee","target","rect","getBoundingClientRect","clientX","left","clientY","top","push","addEventListener","Palett","palett_Draw","j","strokeStyle","moveTo","lineTo","stroke","fillRect","palett_down","msg","palett_up","_Main","main","args","canvas2","id","palett","canvas1","pen","nylonfunc","func","object","fn","obj","nylon","global","keyword","map","params","keys","split","forEach","key","element","off","arr","splice","arts","f","g","a","b","document","getElementById","createElement","tag","EventInit","bubbles","cancelable","CustomEventInit","detail","MutationObserverInit","childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","attributeFilter","UIEventInit","view","FocusEventInit","relatedTarget","MouseEventInit","screenX","screenY","ctrlKey","shiftKey","altKey","metaKey","button","buttons","region","WheelEventInit","deltaX","deltaY","deltaZ","deltaMode","KeyboardEventInit","location","repeat","charCode","keyCode","which","CompositionEventInit","ProgressEventInit","lengthComputable","loaded","total","XMLHttpRequestOptions","anon","ScrollOptions","behavior","ScrollOptionsHorizontal","ScrollOptionsVertical","BoxQuadOptions","box","relativeTo","ConvertCoordinateOptions","fromBox","toBox","TrackEventInit","track","PopStateEventInit","state","HashChangeEventInit","oldURL","newURL","PageTransitionEventInit","persisted","ErrorEventInit","message","filename","lineno","column","DragEventInit","dataTransfer","CloseEventInit","wasClean","code","reason","StorageEventInit","oldValue","newValue","url","storageArea","MessageEventInit","origin","lastEventId","source","ports","EventSourceInit","withCredentials","IDBObjectStoreParameters","keyPath","autoIncrement","IDBIndexParameters","unique","multiEntry","IDBVersionChangeEventInit","oldVersion","newVersion","NotificationOptions","titleDir","body","bodyDir","iconUrl","DOMPointInit","z","w","SourceInfo","sourceId","kind","label","MediaStreamTrackEventInit","MediaSourceStates","sourceType","width","height","frameRate","aspectRatio","facingMode","volume","CapabilityRange","max","min","supported","AllVideoCapabilities","AllAudioCapabilities","MediaStreamConstraints","video","audio","MediaTrackConstraints","mandatory","_optional","MinMaxConstraint","HitRegionOptions","path","parentID","cursor","control","role","WebGLContextAttributes","alpha","depth","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","WebGLContextEventInit","statusMessage","DeviceOrientationEventInit","beta","gamma","absolute","DeviceMotionEventInit","acceleration","accelerationIncludingGravity","rotationRate","interval","coe","ws","onmessage","me","parse","index","indexOf","emitfunc","jsondata","stringify","send","onconnect","onopen","onclose","close","window"],"mappings":"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AA;;GAAA;;EAAA;CAAA,EAA5B2B,YAASC,eAAc,CAAC5B,EAAD,CAAK;;;;;AAOxB4B,8BAAe5B;QACS;EAAA,OAAA;;GAAA;;EAAA;CAAA,EAA5B2B,YAASC,eAAc,CAAC5B,EAAD,CAAK;;;;;AAOxB6B,6BAAcC;QACU;EAAA,OAAA;;GAAA;;EAAA;CAAA,EAA5BH,YAASE,cAAa,CAACC,GAAD,CAAM;;;;;SAuIlBC;C,IAGlBC,Q,G;C,IAEAC,W,G;;;;SAyBkBC;CAAAA,mBAAAA,CAAAA;C,IAGlBC,O,G;;;;SA6FkBC;C,IAElBC,U,G;C,IACAC,W,G;C,IACAC,c,G;C,IACAC,Q,G;C,IACAC,kB,G;C,IACAC,sB,G;C,IACAC,gB,G;;;;SAy4BkBC;CAAAA,mBAAAA,CAAAA;C,IAKlBC,K,G;C,IAEAV,O,G;;;;SAKkBW;C,IAElBd,Q,G;C,IACAC,W,G;C,IACAY,K,G;C,IACAV,O,G;C,IACAY,c,G;;;;SAKkBC;CAAAA,qBAAAA,CAAAA;C,IAOlBC,Q,G;C,IAEAC,Q,G;C,IAEAvE,Q,G;C,IAEAE,Q,G;C,IAEAsE,Q,G;C,IAEAC,S,G;C,IAEAC,O,G;C,IAEAC,Q,G;C,IAEAC,O,G;C,IAEAC,Q,G;C,IAEAT,c,G;C,IAIAU,O,G;;;;SAKkBC;C,IAElB1B,Q,G;C,IACAC,W,G;C,IACAY,K,G;C,IACAV,O,G;C,IACAc,Q,G;C,IACAC,Q,G;C,IACAvE,Q,G;C,IACAE,Q,G;C,IACAsE,Q,G;C,IACAC,S,G;C,IACAC,O,G;C,IACAC,Q,G;C,IACAC,O,G;C,IACAC,Q,G;C,IACAT,c,G;C,IACAY,O,G;C,IACAC,O,G;C,IACAC,O,G;C,IACAC,U,G;;;;SAKkBC;C,IAElB/B,Q,G;C,IACAC,W,G;C,IACAY,K,G;C,IACAV,O,G;C,IACAlB,I,G;C,IACA+C,S,G;C,IACAb,Q,G;C,IACAC,S,G;C,IACAC,O,G;C,IACAC,Q,G;C,IACAW,O,G;C,IACAC,S,G;C,IACAC,Q,G;C,IACAC,M,G;;;;SAKkBC;C,IAElBrC,Q,G;C,IACAC,W,G;C,IACAY,K,G;C,IACAV,O,G;C,IACA3E,K,G;;;;SAqDkB8G;CAAAA,mBAAAA,CAAAA;C,IAElBC,iB,G;C,IACAC,O,G;C,IACAC,M,G;;;;SAwFkBC;C,IAElBC,K,G;;;;SA+/BkBC;C,IAElBC,S,G;;;;SAoCkBC;CAAAA,uBAAAA,CAAAA;C,IAElBjI,E,G;;;;SAKkBkI;CAAAA,uBAAAA,CAAAA;C,IAElBjI,E,G;;;;SAyIkBkI;C,IAElBC,I,G;C,IACAC,W,G;;;;SAKkBC;C,IAElBC,Q,G;C,IACAC,M,G;;;;SAk3BkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,M,G;;;;SAkkBkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,M,G;;;;SAgBkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,O,G;C,IACAC,O,G;;;;SAekBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,U,G;;;;SAwEkBC;CAAAA,mBAAAA,CAAAA;C,IAGlBC,Q,G;C,IAEAC,S,G;C,IAEAC,O,G;C,IAEAC,O,G;;;;SAqLkBC;CAAAA,wBAAAA,CAAAA;C,IAElBC,a,G;;;;SAwlBkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,S,G;C,IACAC,K,G;C,IACAC,O,G;;;;SAiHkBC;CAAAA,mBAAAA,CAAAA;C,IAElBzF,I,G;C,IACA0F,S,G;C,IACAC,S,G;C,IACAC,I,G;C,IACAC,Y,G;;;;SAmBkBC;CAAAA,mBAAAA,CAAAA;C,IAElBvJ,K,G;C,IACAwJ,O,G;C,IACAC,Y,G;C,IACAC,O,G;C,IACAC,M,G;;;;SAwKkBC;C,IAElBC,gB,G;;;;SAuBkBC;C,IAElBC,Q,G;C,IACAC,c,G;;;;SAKkBC;C,IAElBC,O,G;C,IACAC,W,G;;;;SAKkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,W,G;C,IACAC,W,G;;;;SAmSkBC;C,IAElBC,S,G;C,IACAC,K,G;C,IACAC,Q,G;C,IACApG,I,G;C,IACAqG,Q,G;;;;SA+BkBC;C,IAElBvL,E,G;C,IACAC,E,G;C,IACAuL,E,G;C,IACAC,E,G;;;;SAoOkBC;C,IAElBC,S,G;C,IACAC,K,G;C,IACAC,M,G;;;;SAKkBC;CAAAA,mBAAAA,CAAAA;C,IAElBpD,M,G;;;;SAkCkBqD;C,IAElBC,W,G;C,IACAL,S,G;C,IACAM,M,G;C,IACAC,O,G;C,IACAC,U,G;C,IACAC,Y,G;C,IACAC,W,G;C,IACAC,O,G;;;;SAKkBC;C,IAElBC,I,G;C,IACAC,I,G;C,IACAC,U,G;;;;SAKkBC;C,IAElBX,W,G;C,IACAL,S,G;C,IACAM,M,G;C,IACAC,O,G;C,IACAC,U,G;C,IACAC,Y,G;C,IACAC,W,G;;;;SAKkBO;C,IAElBN,O,G;;;;SAekBO;C,IAElBC,M,G;C,IACAC,M,G;;;;SAKkBC;C,IAElBC,U,G;C,IACAC,U,G;;;;SAYkBC;C,IAElBX,I,G;C,IACAC,I,G;;;;SA+LkBW;C,IAElBC,K,G;C,IACAlK,G,G;C,IACAmK,S,G;C,IACAC,O,G;C,IAEAC,Q,G;C,IAEA3B,M,G;C,IACA4B,K,G;;;;SAwCkBC;C,IAElBC,M,G;C,IACAC,M,G;C,IACAC,Q,G;C,IACAC,U,G;C,IACAC,mB,G;C,IACAC,sB,G;;;;SAi5BkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,c,G;;;;SAoGkBC;CAAAA,mBAAAA,CAAAA;C,IAElBR,M,G;C,IACAS,K,G;C,IACAC,M,G;C,IACAC,S,G;;;;SAgCkBC;CAAAA,mBAAAA,CAAAA;C,IAElBC,a,G;C,IACAC,6B,G;C,IACAC,a,G;C,IACAC,S,G;;;;SC3uOCC,IAIkB5E;;;CACpB,IAAK6E,GAAG,GAAE,cAAe7E,GAAf;CACV,IAAKzJ,GAAG,GAAE,UAAA;CAEV,IAAKsO,GAAGC,UAAU,GAAE,CAAA,UAAA,CAAA;;;;;EACdC,EAAG,GAAI;GAAA,OAAA;;IAAA;;GAAA;EAAA,EAAFtN,CAAE;EACPd,IAAK,GAAkC;GAAA,OAAA;;IAAA;;GAAA;EAAA,EAA3BqO,UAAK,CAAED,EAAGpO,KAAK,KAAV,CAAsB;EACvCsD,IAAK,GAAmB;GAAA,OAAA;;IAAA;;GAAA;EAAA,EAAjBtD,IAAI,CAAC,QAAY;EACxBsO,KAAM,GAAEhL,IAAKiL,QAAO,CAAE,WAAF;EACxB,IAAID,KAAM,KAAG,EAAC;GACZhL,IAAKO,OAAM,CAAEyK,OAAO,CAAT;;EAEb,KAAK1O,GAAGe,UAAI,CAAE2C,MAAMtD,IAAR;CARM,CAAA;CAWhBwO,QAAS,GAAE,CAAA,UAAA,MAAA;;EACTC,QAAS,GAAOC,cAAS,CAAErL,MAAF;EAC7B,KAAK6K,GAAGS,KAAI,CAAEF,QAAF;CAFC,CAAA;CAKf,IAAK7O,GAAGE,WAAE,CAAE,aAAa0O,QAAf;CACV,IAAK5O,GAAGE,WAAE,CAAE,UAAU0O,QAAZ;;;;AAGHI,gDAAW7L;CAClB,IAAI,IAAKmL,GAAG,IAAG;EACb,IAAKA,GAAGW,OAAO,GAAE9L;;;;;AAIZ+L,8CAAS/L;CAChB,IAAKmL,GAAGY,QAAQ,GAAE/L;;;;AAGXgM;CACP,IAAKb,GAAGa,MAAK,CAAA;;;;ACYb;;;;;;;;;;;AH3CQ3L,iBAAAA;CAAAA,OAAuB;EAAA,OAAA;;GAAA;;EAAA;CAAA,EAAdF,WAAM,CAAC,GAAO,EAAvBE;AAAAA;ACMK4L,iBAAAA;CAAAA,OAAc9L,WAAM,CAAC,MAArB8L;AAAAA;AAIH7K,iBAAAA;CAAAA,OAAiC;EAAA,OAAA;;GAAA;;EAAA;CAAA,EAAnBjB,WAAM,CAAC,QAAY,EAAjCiB;AAAAA","file":"pen3.jsx.js","sourcesContent":[null,"import \"nylon.client.jsx\";\nimport \"js/web.jsx\";\nimport \"nylon.coe.jsx\";\n\nfinal class Pen{\n\tvar canvas : HTMLCanvasElement;\n\tvar ctx : CanvasRenderingContext2D;\n\tvar mouse : boolean;\n\tvar x = [] : number[];\n\tvar y = [] : number[];\n\n\tfunction constructor(canvas : HTMLCanvasElement){\n\t\tthis.ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\t\tthis.canvas = canvas;\n\t\tthis.mouse = false;\n\t}\n\n\tfunction start() : void{\n\t\tvar color = [0,0,0] : number[];\n\t\tvar nl = new nylon();\t\t\t\t\t\t\t//nylonの生成\n\t\tvar co = new coe('ws://localhost:8000/chat');\n\n\t\tnl.on(\"color\",(dummy:Map.<variant>):void ->{\t//コールバック関数\n\t\t\tcolor = dummy[\"rgb\"] as number[];\n\t\t});\n\t\t\n\t\tnl.on( \"draw\", (data:Map.<variant>):void -> {\n\t\t\tvar x = data[\"x\"] as number[];\n\t\t\tvar y = data[\"y\"] as number[];\n\t\t\tvar col = data[\"color\"] as number[];\n\t\t\tfor( var i=0; i<x.length; i++ ) {\n\t\t\t\tthis.ctx.beginPath();\n\t\t\t\tthis.ctx.fillStyle = \"rgb(\"+col[0]+\",\"+col[1]+\",\"+col[2]+\")\";\n\t\t\t\tthis.ctx.arc( x[i], y[i], 5, 0, Math.PI*2.0, false );\n\t\t\t\tthis.ctx.fill();\n\t\t\t}\n\t\t});\n\t\tvar pen_down = function(e : Event):void{\n\t\t\tthis.mouse = true;\n\t\t\tthis.x = [];\n\t\t\tthis.y = [];\n\t\t};\n\t\tvar pen_up = function(e : Event):void{\n\t\t\tthis.mouse = false;\n\t\t\tnl.emit( \"broadcast|draw\", { x:this.x, y:this.y, color:color } );\n\t\t};\n\t\tvar draw = function(e : Event):void{\n\t\t\tif( this.mouse){\n\t\t\t\tvar es = e as MouseEvent;\n\t\t\t\tvar ee = es.target as Element;\n\t\t\t\tvar rect = ee.getBoundingClientRect();\n\t\t\t\tvar x = es.clientX - rect.left;\n\t\t\t\tvar y = es.clientY - rect.top;\n\t\t\t\tthis.x.push( x );\n\t\t\t\tthis.y.push( y );\n\t\t\t\tthis.ctx.beginPath();\n\t\t\t\tthis.ctx.fillStyle = \"rgb(\"+color[0]+\",\"+color[1]+\",\"+color[2]+\")\";\n\t\t\t\tthis.ctx.arc(x,y,5,0,Math.PI*2.0,false);\n\t\t\t\tthis.ctx.fill();\n\t\t\t}\n\t\t};\n\t\tthis.canvas.addEventListener( \"mousedown\", pen_down );\n\t\tthis.canvas.addEventListener( \"mouseup\", pen_up );\n\t\tthis.canvas.addEventListener( \"mousemove\", draw );\n\t}\n}\n\nfinal class Palett{\n\tvar canvas : HTMLCanvasElement;\n\tvar ctx : CanvasRenderingContext2D;\n\tvar color = [0,0,0] : number[];\t//r,g,b\n\tvar mouse : boolean;\n\tvar nl : nylon;\n\n\tfunction constructor(canvas : HTMLCanvasElement){\n\t\tthis.ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\t\tthis.canvas = canvas;\n\t\tthis.mouse = false;\n\t\tif(this.color[0] == null){\n\t\tfor(var i=0; i<3; i++)\n\t\t\tthis.color[i] = 0;\n\t\t}\n\t\tthis.palett_Draw();\n\t}\n\n\tfunction palett_Draw() : void{\n\t\t//パレットの表示\n\t\tfor(var j=0; j<3; j++){\n\t\t\tfor(var i=0; i<255; i++){\n\t\t\t\tthis.ctx.beginPath();\n\t\t\t\tswitch(j){\n\t\t\t\t\tcase 0: \tthis.ctx.strokeStyle = \"rgb(\"+i+\",0,0)\"; break;\n\t\t\t\t\tcase 1: \tthis.ctx.strokeStyle = \"rgb(0,\"+i+\",0)\"; break;\n\t\t\t\t\tcase 2:     this.ctx.strokeStyle = \"rgb(0,0,\"+i+\")\"; break;\n\t\t\t\t}\n\t\t\t\tthis.ctx.moveTo(i,j*50);\n\t\t\t\tthis.ctx.lineTo(i,j*50+50);\n\t\t\t\tthis.ctx.stroke();\n\t\t\t}\n\t\t\t//選択ラインの表示\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.strokeStyle = \"rgb(255,255,255)\";\n\t\t\tthis.ctx.moveTo(this.color[j],j*50);\n\t\t\tthis.ctx.lineTo(this.color[j],j*50+50);\n\t\t\tthis.ctx.stroke();\n\t\t\t//合成色の表示\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.fillStyle = \"rgb(\"+this.color[0]+\",\"+this.color[1]+\",\"+this.color[2]+\")\";\n\t\t\tthis.ctx.fillRect(0,150,255,200);\n\t\t}\n\t\tlog(\"OK\");\n\t}\n\n\tfunction start() :void{\n\t\tthis.nl = new nylon();\n\t\tvar palett_down = function(e : Event):void{\n\t\t\tif(this.mouse == false){\n\t\t\t\tthis.mouse = true;\n\t\t\t\tvar es = e as MouseEvent;\n\t\t\t\tvar ee = es.target as Element;\n\t\t\t\tvar rect = ee.getBoundingClientRect();\n\t\t\t\tvar x = es.clientX - rect.left;\n\t\t\t\tvar y = es.clientY - rect.top;\n\t\t\t\tlog(\"check0 \"+this.color[0]);\n\t\t\t\tif(x < 256){\n\t\t\t\t\tif(y < 50)\n\t\t\t\t\t\tthis.color[0] = x;\n\t\t\t\t\telse if(y < 100)\n\t\t\t\t\t\tthis.color[1] = x;\n\t\t\t\t\telse if(y < 150)\n\t\t\t\t\t\tthis.color[2] = x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//nylonによる色情報の送信\t\t\t\t\t\t//nylonの生成\n\t\t\t\tvar msg ={\"rgb\":this.color}:Map.<variant>;\n\t\t\t\tthis.nl.emit(\"color\",msg);\n\t\t\t\tthis.palett_Draw();\n\t\t\t}\t\n\t\t};\n\t\tvar palett_up = function(e : Event):void{\n\t\t\tthis.mouse = false;\n\t\t};\n\t\t//イベント待ち\n\t\tthis.canvas.addEventListener( \"mousedown\", palett_down );\n\t\tthis.canvas.addEventListener( \"mouseup\", palett_up );\n\n\t\tthis.nl.on( \"color\", (data:Map.<variant>):void -> {\n\t\t\tvar color = data[\"rgb\"] as number[];\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.fillStyle = \"rgb(\"+color[0]+\",\"+color[1]+\",\"+color[2]+\")\";\n\t\t\tthis.ctx.fillRect(0,150,255,200);\n\t\t});\n\t}\n}\n\nfinal class _Main{\n\tstatic function main(args : string[]):void{\n\t\tvar canvas2 = dom.id(\"palett\") as HTMLCanvasElement;\n\t\tvar palett = new Palett(canvas2);\n\n\t\tvar canvas1 =  dom.id(\"myCanvas\") as HTMLCanvasElement;\n\t\tvar pen = new Pen(canvas1);\n\t\t\n\t\tpalett.start();\n\t\tpen.start();\n\t}\n}\n\n","import \"js.jsx\";\n\nclass nylonfunc {\n\tvar fn: function( :Map.<variant> ): void;\n\tvar obj: nylon;\n\tfunction constructor( func: function( :Map.<variant> ): void, object: nylon ) {\n\t\tthis.fn = func;\n\t\tthis.obj = object;\n\t}\n}\n\nclass nylon {\n\tstatic var map = js.global[\"map\"] as Map.<Array.<nylonfunc>>;\n\n\tfunction constructor() {\n\t\tif( js.global[\"map\"] == null )\tjs.global[\"map\"] = {}: Map.<Array.<nylonfunc>>;\n\t}\n\tfunction on( keyword: string, fn: function( :Map.<variant> ): void ): void {\n\t\tif( nylon.map[ keyword ] == null ){\n\t\t\tlog \"map - keyword is null\";\n\t\t\tnylon.map[ keyword ] = [ new nylonfunc( fn, this ) ];\n\t\t} else {\n\t\t\tnylon.map[ keyword ].push( new nylonfunc( fn, this ) );\n\t\t}\n\t}\n\tfunction emit( keyword: string, params: Map.<variant> ): void {\n\t\tlog nylon.map[keyword];\n\t\tvar keys = keyword.split( \"|\" );\n\t\tthis.emit( keys, params );\n\t}\n\tfunction emit( keys: Array.<string>, params: Map.<variant> ): void {\n\t\tif( nylon.map[\"keywords\"] == null)\tparams[\"keywords\"] = keys;\n\t\tkeys.forEach( function( key: Nullable.<string> ): void {\n\t\t\tif( nylon.map[key] == null ) {\n\t\t\t\tlog \"Invarid keyword!\";\n\t\t\t} else {\n\t\t\t\tnylon.map[key].forEach( function( element: nylonfunc ): void {\n\t\t\t\t\tif( element.obj != this ) {\n\t\t\t\t\t\t//Timer.setTimeout( ()-> { element.fn(params); }, 0 );\n\t\t\t\t\t\telement.fn( params );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\tfunction off( keyword: string, fn: function( :Map.<variant> ): void ): void {\n\t\tif( nylon.map[ keyword ] == null ){\n\t\t\tlog \"map - keyword is null\";\n\t\t} else {\n\t\t\tvar arr = nylon.map[keyword];\n\t\t\tfor( var i=arr.length-1; i>=0; i-- ){\n\t\t\t\tlog i;\n\t\t\t\tif( arr[i].obj == this && arr[i].fn == fn ){\n\t\t\t\t\tarr.splice( i, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( nylon.map[ keyword ].length == 0 )\tnylon.map[ keyword ] = null;\n\t\t}\n\t}\n}\n\nclass _Main {\n\tstatic function main( arts: string[] ): void {\n\t\tvar f = function( x: Map.<variant> ): void {\n\t\t\tlog \"f was executed\";\n\t\t};\n\t\tvar g = function( x: Map.<variant> ): void {\n\t\t\tlog \"g was executed\";\n\t\t};\n\n\t\tvar a = new nylon();\n\t\tlog \"check A\";\n\t\ta.on( \"test\", f );\n\t\ta.on( \"test2\", f );\n\t\tlog nylon.map;\t// for debug;\n\t\tlog \"check B\";\n\t\ta.on( \"test\", g );\n\t\tlog nylon.map;\t// for debug;\n\t\ta.emit(\"test\", {}:Map.<variant>);\t// not execute\n\n\t\tvar b = new nylon();\n\t\tlog \"check C\";\n\t\tb.emit(\"test\", null);\t// execute\n\t\tb.emit(\"test2\", null);\t// execute\n\t\ta.off( \"test\", f );\n\t\tlog \"check D\";\n\t\tlog nylon.map;\n\t\tlog \"check E\";\n\t\tb.emit(\"test|test2\", null);\n\t\tlog nylon.map;\n\t}\n}\n\n",null,"import \"js.jsx\";\nimport \"js/web.jsx\";\nimport \"nylon.client.jsx\";\n\nclass coe {\n  var ws : WebSocket;\n  var nl : nylon;\n\n  function constructor( url : string ) {\n    this.ws = new WebSocket( url );\n    this.nl = new nylon();\n\n    this.ws.onmessage = function( e : Event ) : void {\n      var me = e as MessageEvent;\n      var data = JSON.parse( me.data as string ) as Map.<variant>;\n      var keys = data[\"keywords\"] as Array.<string>;\n      var index = keys.indexOf( 'broadcast' );\n      if( index != -1 ) {\n        keys.splice( index, 1 );\n      }\n      this.nl.emit( keys, data );\n    };\n\n    var emitfunc = function( params: Map.<variant> ): void {\n      var jsondata = JSON.stringify( params );\n      this.ws.send( jsondata );\n    };\n\n    this.nl.on( \"broadcast\", emitfunc );\n    this.nl.on( \"server\", emitfunc );\n  }\n\n  function onconnect( fn: function( :Event ): void ) : void {\n    if( this.ws != null ) {\n      this.ws.onopen = fn;\n    }\n  }\n\n  function onclose( fn: function( :Event ) : void ) : void {\n    this.ws.onclose = fn;\n  }\n\n  function close() : void {\n    this.ws.close();\n  }\n}\n",null]}